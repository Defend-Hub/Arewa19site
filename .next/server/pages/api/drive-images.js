"use strict";(()=>{var e={};e.id=733,e.ids=[733],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,a)=>{Object.defineProperty(a,"l",{enumerable:!0,get:function(){return function e(a,t){return t in a?a[t]:"then"in a&&"function"==typeof a.then?a.then(a=>e(a,t)):"function"==typeof a&&"default"===t?a:void 0}}})},9606:(e,a,t)=>{t.r(a),t.d(a,{config:()=>g,default:()=>p,routeModule:()=>v});var i={};t.r(i),t.d(i,{default:()=>m});var r=t(1802),n=t(7153),o=t(6249);let s=require("googleapis"),l=require("path");var d=t.n(l);let u=require("fs");var c=t.n(u);let f=()=>{let e=d().join(process.cwd(),"pages/api/striking-effort-439520-v9-cf3e883365bc.json"),a=JSON.parse(c().readFileSync(e,"utf8")),t=new s.google.auth.JWT(a.client_email,null,a.private_key,["https://www.googleapis.com/auth/drive.readonly"]);return s.google.drive({version:"v3",auth:t})};async function m(e,a){try{let t=e.query.folderId||process.env.GOOGLE_DRIVE_FOLDER_ID||"1HF_7yMujtVKz6jP3KD-cIEYZZqXTGcBu",i=e.query.state||"all";if(!t)return a.status(400).json({error:"No folder ID provided"});let r=f(),n=(await r.files.list({q:`'${t}' in parents and trashed = false and mimeType contains 'image/'`,fields:"files(id, name, thumbnailLink, webContentLink, imageMediaMetadata, description)",orderBy:"createdTime desc",pageSize:100})).data.files.map(e=>{let a="unknown";if(e.description){let t=e.description.toLowerCase().match(/state:\s*(\w+)/);t&&(a=t[1].toLowerCase())}else{let t=e.name.toLowerCase();for(let e of["kaduna","kano","borno","fct","katsina","jigawa","sokoto","zamfara","kebbi","bauchi","gombe","yobe","adamawa","taraba","plateau","nasarawa","niger","kwara","kogi"])if(t.includes(e)){a=e;break}}let t=`https://drive.google.com/uc?export=view&id=${e.id}`,i=e.thumbnailLink;i&&(t=i=i.replace(/=s\d+$/,"=s1000"));let r=`https://drive.google.com/thumbnail?id=${e.id}&sz=w1000`;return{id:e.id,name:e.name,imageUrl:t,thumbnailUrl:e.thumbnailLink,altImageUrl:r,state:a,metadata:e.imageMediaMetadata||{}}}),o=n;return"all"!==i&&(o=n.filter(e=>e.state===i.toLowerCase())),a.status(200).json({images:o})}catch(e){return console.error("Error fetching Google Drive images:",e),a.status(500).json({error:"Failed to fetch images from Google Drive",details:e.message})}}let p=(0,o.l)(i,"default"),g=(0,o.l)(i,"config"),v=new r.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/drive-images",pathname:"/api/drive-images",bundlePath:"",filename:""},userland:i})},7153:(e,a)=>{var t;Object.defineProperty(a,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(e,a,t)=>{e.exports=t(145)}};var a=require("../../webpack-api-runtime.js");a.C(e);var t=a(a.s=9606);module.exports=t})();